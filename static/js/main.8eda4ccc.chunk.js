(this["webpackJsonptetris-app"]=this["webpackJsonptetris-app"]||[]).push([[0],{13:function(t,e,i){},15:function(t,e,i){"use strict";i.r(e);var r=i(2),s=i.n(r),a=i(6),o=i.n(a),h=(i(13),function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,16)).then((function(e){var i=e.getCLS,r=e.getFID,s=e.getFCP,a=e.getLCP,o=e.getTTFB;i(t),r(t),s(t),a(t),o(t)}))}),n=i(3),c=i(4),d=i(1),l=i(8),v=i(7),u=function(){function t(e,i){Object(n.a)(this,t),this.width=e,this.height=i,this.board=[],this.score=0,this.level=0,this.pivot=[],this.coor=[[0,0],[0,0],[0,0],[0,0]],this.hold=0,this.next=[0,0,0],this.highlevel=0,this.highscore=0,this.create_board()}return Object(c.a)(t,[{key:"create_board",value:function(){for(var t=[],e=0;e<this.height;e++){t[e]=[];for(var i=0;i<this.width;i++)t[e][i]=0}return this.board=t,this.next_piece_grab(),this.board}},{key:"gen_piece",value:function(t,e){var i=Math.floor(7*Math.random())+2;if(e>1&&(i=1*e),t){for(var r={2:[[0,0],[1,-1],[1,0],[1,1],[1,0]],3:[[0,0],[0,1],[1,0],[1,1],[.5,.5]],4:[[0,-1],[0,0],[0,1],[0,2],[.5,.5]],5:[[0,1],[1,-1],[1,0],[1,1],[1,0]],6:[[0,-1],[1,-1],[1,0],[1,1],[1,0]],7:[[0,-1],[0,0],[1,0],[1,1],[1,0]],8:[[1,-1],[0,0],[1,0],[0,1],[1,0]]}[i],s=0;s<4;s++)this.board[r[s][0]+1][r[s][1]+4]=-i;this.pivot=r[4],this.pivot[0]+=1,this.pivot[1]+=4,this.update_ghost()}return i}},{key:"sleep",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},{key:"piece_fall",value:function(){for(var t=this.update_coor(),e=!0,i=0;i<4;i++){var r=t[i][0],s=t[i][1];(r==this.height-1||this.board[r+1][s]>1)&&(e=!1)}if(1!=e)this.solidify_piece();else{for(var a=this.board[t[0][0]][t[0][1]],o=0;o<4;o++)this.board[t[o][0]][t[o][1]]=0;for(var h=0;h<4;h++)this.board[t[h][0]+1][t[h][1]]=a;this.pivot[0]+=1}return this.over_stack_check(),e}},{key:"update_coor",value:function(){for(var t=[[],[],[],[]],e=0,i=0;i<this.height;i++)for(var r=0;r<this.width;r++)this.board[i][r]<0&&(this.coor[e][0]=i,this.coor[e][1]=r,t[e][0]=i,t[e][1]=r,e++);return t}},{key:"rotate_piece",value:function(){for(var t=this.update_coor(),e=this.pivot[0],i=this.pivot[1],r=t.slice(),s=0;s<4;s++){var a=[0,0];a[0]=e+(t[s][1]-i),a[1]=i+-(t[s][0]-e),r[s]=a}for(var o=this.board[t[0][0]][t[0][1]],h=0;h<4;h++)this.board[t[h][0]][t[h][1]]=0;for(var n=[],c=0;c<4;c++){var d=[];d[0]=r[c][0]+1,d[1]=r[c][1],n[c]=d}for(var l=[this.pivot[0]+1,this.pivot[1]],v=[],u=0;u<4;u++){var b=[];b[0]=r[u][0]-1,b[1]=r[u][1],v[u]=b}for(var f=[this.pivot[0]-1,this.pivot[1]],p=[],_=0;_<4;_++){var g=[];g[0]=r[_][0],g[1]=r[_][1]-1,p[_]=g}for(var j=[this.pivot[0],this.pivot[1]-1],k=[],m=0;m<4;m++){var x=[];x[0]=r[m][0],x[1]=r[m][1]+1,k[m]=x}var y=[this.pivot[0],this.pivot[1]+1];if(this.coor_is_valid(r));else this.coor_is_valid(n)?(r=n,this.pivot=l):this.coor_is_valid(p)?(r=p,this.pivot=j):this.coor_is_valid(k)?(r=k,this.pivot=y):this.coor_is_valid(v)?(r=v,this.pivot=f):r=t;for(var O=0;O<4;O++)this.board[r[O][0]][r[O][1]]=o;return this.update_ghost(),r}},{key:"coor_is_valid",value:function(t){for(var e=!0,i=0;i<4;i++){var r=t[i][0],s=t[i][1];if(r>this.board.length-1||r<0||s>this.board[0].length-1||s<0){e=!1;break}this.board[r][s]>1&&(e=!1)}return e}},{key:"move_left",value:function(){var t=this.update_coor(),e=!0;if(e)for(var i=0;i<4;i++){var r=t[i][0],s=t[i][1];(0==s||this.board[r][s-1]>1)&&(e=!1)}if(1!=e)e=!1;else{for(var a=this.board[t[0][0]][t[0][1]],o=0;o<4;o++)this.board[t[o][0]][t[o][1]]=0;for(var h=0;h<4;h++)this.board[t[h][0]][t[h][1]-1]=a;this.pivot[1]-=1}this.update_ghost()}},{key:"move_right",value:function(){var t=this.update_coor(),e=!0;if(e)for(var i=0;i<4;i++){var r=t[i][0],s=t[i][1];(s==this.board[0].length-1||this.board[r][s+1]>1)&&(e=!1)}if(1!=e)e=!1;else{for(var a=this.board[t[0][0]][t[0][1]],o=0;o<4;o++)this.board[t[o][0]][t[o][1]]=0;for(var h=0;h<4;h++)this.board[t[h][0]][t[h][1]+1]=a;this.pivot[1]+=1}this.update_ghost()}},{key:"move_drop",value:function(){var t=this.piece_fall();return this.score_increase(1,0),t}},{key:"move_hold_swap",value:function(){var t=this.update_coor();if(this.hold<2){this.hold=-this.board[t[0][0]][t[0][1]];for(var e=0;e<4;e++)this.board[t[e][0]][t[e][1]]=0;this.next_piece_grab()}else{for(var i=1*-this.board[t[0][0]][t[0][1]],r=0;r<4;r++)this.board[t[r][0]][t[r][1]]=0;this.gen_piece(!0,this.hold),this.hold=1*i}return this.hold}},{key:"next_piece_grab",value:function(){if(0==this.next[0]||0==this.next[1])for(var t=0;t<3;t++)this.next[t]=this.gen_piece(!1,0);var e=1*this.next[0];return this.next=[this.next[1],this.next[2],this.gen_piece(!1,0)],this.gen_piece(!0,e),e}},{key:"solidify_piece",value:function(){for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)this.board[t][e]<0&&(this.board[t][e]=-this.board[t][e]);this.line_cleared_check(),this.next_piece_grab()}},{key:"update_ghost",value:function(){for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)1==this.board[t][e]&&(this.board[t][e]=0);for(var i=this.update_coor(),r=0,s=0,a=!0;a;){r++;for(var o=0;o<4;o++){if(i[o][0]+r>this.board.length-1)a=!1;else this.board[i[o][0]+r][i[o][1]]>1&&(a=!1)}a&&s++}for(var h=0;h<4;h++){0==this.board[i[h][0]+s][i[h][1]]&&(this.board[i[h][0]+s][i[h][1]]=1)}return s}},{key:"line_cleared_check",value:function(){for(var t=[],e=0;e<this.board.length;e++){for(var i=!0,r=0;r<this.board[e].length;r++)this.board[e][r]<=1&&(i=!1);i&&t.push(e)}var s=t.length;this.score_increase(0,s);for(var a=0;a<s;a++)for(var o=0;o<this.board[t[a]].length;o++)this.board[t[a]][o]=0;for(var h=Math.max.apply(Math,t);h>=0;h--)for(var n=0;n<this.board[h].length;n++)if(this.board[h][n]>1){for(var c=0,d=0;d<s;d++)t[d]>h&&c++;var l=this.board[h][n];this.board[h][n]=0,this.board[h+c][n]=l}return t}},{key:"over_stack_check",value:function(){for(var t=!0,e=0;e<this.board[3].length;e++)this.board[3][e]>0&&(t=!1);if(1!=t){var i=this.reset_all();this.highscore=Math.max(i[1],this.highscore),this.highlevel=Math.max(i[0],this.highlevel)}}},{key:"level_update",value:function(){this.level=Math.max(this.level,Math.floor(this.score/100))}},{key:"reset_all",value:function(){var t=this.score,e=this.level;return this.board=[],this.score=0,this.level=0,this.pivot=[],this.coor=[[0,0],[0,0],[0,0],[0,0]],this.hold=0,this.next=[0,0,0],this.create_board(),[e,t]}},{key:"score_increase",value:function(t,e){return 0==e?this.score=this.score+t:(1==e&&(this.score=this.score+40*(this.level+1)),2==e&&(this.score=this.score+100*(this.level+1)),3==e&&(this.score=this.score+300*(this.level+1)),e>3&&(this.score=this.score+1200*(this.level+1))),this.level_update(),this.score}}]),t}(),b=i(0),f=function(t){for(var e=[],i=0;i<24;i++)e.push(i);for(var r=[],s=0;s<12;s++)r.push(s);var a="c";return Object(b.jsxs)("div",{className:"TetrisBoard",children:[Object(b.jsx)("tr",{className:"TetrisRow",children:r.map((function(t){return Object(b.jsx)("td",{className:"TetrisCell",id:"cBorder"})}))}),e.map((function(t){return Object(b.jsxs)("tr",{className:"TetrisRow",id:"r"+t,children:[Object(b.jsx)("td",{className:"TetrisCell",id:"cBorder"}),_.board[t].map((function(t){return Object(b.jsx)("td",{className:"TetrisCell",id:a+t})})),Object(b.jsx)("td",{className:"TetrisCell",id:"cBorder"})]})})),Object(b.jsx)("tr",{className:"TetrisRow",children:r.map((function(t){return Object(b.jsx)("td",{className:"TetrisCell",id:"cBorder"})}))})]})},p=function(t){Object(l.a)(i,t);var e=Object(v.a)(i);function i(t){var r;return Object(n.a)(this,i),(r=e.call(this,t)).state={updated_state:f()},r.update_board=r.update_board.bind(Object(d.a)(r)),r.handleInput=r.handleInput.bind(Object(d.a)(r)),r.handleLeft=r.handleLeft.bind(Object(d.a)(r)),r.handleRight=r.handleRight.bind(Object(d.a)(r)),r.handleRotate=r.handleRotate.bind(Object(d.a)(r)),r.handleDown=r.handleDown.bind(Object(d.a)(r)),r}return Object(c.a)(i,[{key:"update_board",value:function(){this.setState((function(t){return{updated_state:f()}}))}},{key:"handleLeft",value:function(){_.move_left(),this.update_board()}},{key:"handleRight",value:function(){_.move_right(),this.update_board()}},{key:"handleRotate",value:function(){_.rotate_piece(),this.update_board()}},{key:"handleDown",value:function(){_.move_drop(),this.update_board()}},{key:"handleInput",value:function(t){switch(t.key){case"ArrowLeft":_.move_left();break;case"ArrowRight":_.move_right();break;case"ArrowDown":_.move_drop();break;case" ":_.rotate_piece();break;case"h":_.move_hold_swap()}this.update_board()}},{key:"render",value:function(){return Object(b.jsxs)("div",{onKeyDown:this.handleInput,className:"TetrisGame",children:[Object(b.jsx)("button",{onClick:this.handleLeft,children:"Left"}),Object(b.jsx)("button",{onClick:this.handleRight,children:"Right"}),Object(b.jsx)("button",{onClick:this.handleRotate,children:"Rotate"}),Object(b.jsx)("button",{onClick:this.handleDown,children:"Down"}),Object(b.jsx)("input",{}),Object(b.jsxs)("div",{className:"score-display",children:["Score: ",_.score]}),Object(b.jsxs)("div",{className:"level-display",children:["Level: ",_.level]}),Object(b.jsxs)("div",{className:"hold-display",children:["Hold: ",_.hold]}),Object(b.jsxs)("div",{className:"next-display",children:["Next: ",_.next]}),Object(b.jsxs)("div",{className:"highscore-display",children:["Highscore: ",_.highscore]}),Object(b.jsxs)("div",{className:"highlevel-display",children:["Highlevel: ",_.highlevel]}),this.state.updated_state]})}}]),i}(s.a.Component),_=new u(10,24),g=p;o.a.render(Object(b.jsx)(g,{}),document.getElementById("root")),h()}},[[15,1,2]]]);
//# sourceMappingURL=main.8eda4ccc.chunk.js.map